<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SenangStart Icons | Curated icons designed for Starters</title>

    <link rel="apple-touch-icon" sizes="180x180" href="ss.png" />
    <link rel="shortcut icon" href="ss.png" type="image/x-icon" />

    <!-- Google Fonts: Outfit -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap"
      rel="stylesheet"
    />

    <!-- SenangStart Styles/Scripts -->
    <link rel="stylesheet" href="./dist/senangstart.min.css" />
    <script src="./dist/senangstart-icon.min.js"></script>

    <!-- Senangwebs Jot -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/senangwebs-jot@latest/dist/swj.css"
    />
    <script src="https://unpkg.com/senangwebs-jot@latest/dist/swj.js"></script>

    <!-- Senangwebs Modals -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/senangwebs-modals@latest/dist/swm.css"
    />
    <script src="https://unpkg.com/senangwebs-modals@latest/dist/swm.js"></script>

    <!-- Alpine.js -->
    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ["Outfit", "sans-serif"],
            },
            colors: {
              brand: {
                600: "#2563EB",
                700: "#1D4ED8",
              },
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      @layer base {
        body {
          @apply antialiased text-neutral-900 bg-white dark:bg-[#1B1B1F] dark:text-neutral-100;
        }
      }

      @layer components {
        #search-container input {
          @apply w-full max-w-xl px-5 py-3.5 text-base text-neutral-900 bg-white border border-neutral-200 rounded-full shadow-sm outline-none transition-all duration-200 placeholder:text-neutral-400 dark:bg-neutral-800 dark:text-neutral-100 dark:border-neutral-700 dark:placeholder:text-neutral-500;
          background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' xmlns='http://www.w3.org/2000/svg'%3E%3Cg%3E%3Cpath d='M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z' /%3E%3C/g%3E%3C/svg%3E");
          background-repeat: no-repeat;
          background-position: right 1rem center;
          background-size: 1.25rem;
        }

        #search-container input:focus {
          @apply border-brand-600 ring-4 ring-blue-500/10;
        }

        .swi-pagination-list {
          @apply flex flex-wrap justify-center items-center gap-2 list-none p-0 mt-12;
        }

        .swi-pagination-btn {
          @apply flex items-center justify-center min-w-[2.5rem] h-10 px-3 text-sm font-medium text-neutral-600 bg-white border border-neutral-200 rounded-lg transition-all duration-200 hover:border-brand-600 hover:text-brand-600 dark:bg-neutral-800 dark:text-neutral-300 dark:border-neutral-700 dark:hover:border-brand-600 dark:hover:text-blue-400;
        }

        .swm-modal-overlay {
          @apply bg-white dark:bg-[#1B1B1F] p-0 !important;
        }

        .swm-modal {
          @apply bg-white dark:bg-neutral-800 border border-neutral-200 dark:border-neutral-700 w-full h-full;
        }

        .swm-modal-header{
          @apply border-b border-neutral-200 dark:border-neutral-700;
        }

        .swi-pagination-item.swi-active .swi-pagination-btn {
          @apply z-10 bg-brand-600 text-white border-brand-600 shadow-md shadow-blue-500/20 pointer-events-none;
        }

        .swi-pagination-item.swi-disabled .swi-pagination-btn {
          @apply opacity-50 cursor-not-allowed bg-neutral-50 text-neutral-400 hover:border-neutral-200 hover:text-neutral-400 dark:bg-neutral-900 dark:text-neutral-600 dark:hover:border-neutral-700;
        }

        .swj-button {
          @apply bg-brand-600 text-white text-xs font-medium tracking-widest uppercase px-2 py-1 absolute top-1/2 -translate-y-1/2 right-2 rounded opacity-80 hover:opacity-100;
        }

        .swj-btn .swj-button {
          @apply w-full;
        }
      }
    </style>
  </head>
  <body class="flex flex-col">
    <main class="flex-grow">
      <div class="">
        <div class="max-w-7xl mx-auto py-6 text-center">

          <div
            class="mx-auto w-full flex flex-col md:flex-row md:flex-row justify-between items-center gap-6"
          >
            <div
              id="search-container"
              class="flex flex-col md:flex-row justify-center items-center flex-grow w-full xl:max-w-xl"
            >
              <input type="text" placeholder="Search icons..." id="search-input" />
            </div>
            <div class="flex justify-center items-center gap-4">
              <label
                for="thickness-slider"
                class="text-sm font-medium text-neutral-700 dark:text-neutral-300"
                >Thickness</label
              >

              <input
                id="thickness-slider"
                type="range"
                min="1"
                max="4"
                step="0.1"
                value="1.4"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600 dark:bg-neutral-700"
              />
              <span
                id="thickness-value"
                class="text-xs font-mono w-16 text-neutral-500 bg-neutral-100 px-1.5 py-0.5 rounded dark:bg-neutral-800 dark:text-neutral-400"
                >1.4</span
              >
            </div>
          </div>
        </div>
      </div>

      <div id="all-icons" class="max-w-7xl mx-auto">
        <div class="senangstart-icons">
          <div
            id="icons-container"
            class="grid grid-cols-2 sm:grid-cols-5 md:grid-cols-4 gap-4"
          >
            <!-- Icons injected here -->
          </div>

          <div id="pagination-container">
            <!-- Pagination injected here -->
          </div>
        </div>
      </div>
    </main>

    <script src="https://unpkg.com/senangwebs-index@latest/dist/swi.js"></script>
    <script>
      let currentThickness = 1.4;
      document.addEventListener("DOMContentLoaded", () => {
        const icons = "./src/icons.json";

        const swi = new SenangWebsIndex({
          container: "#icons-container",
          data: icons,
          itemTemplate: (item) => {
            // Polished Card Template
            return `
              <div class="group relative flex flex-col items-center justify-between p-4 bg-white border border-neutral-200 rounded-xl cursor-pointer transition-all duration-300 hover:border-brand-600 hover:shadow-lg hover:shadow-blue-500/10 aspect-square dark:bg-neutral-800 dark:border-neutral-700 dark:hover:border-blue-500 dark:hover:shadow-blue-500/20" onclick="iconDetails('${item.name}', '${item.slug}', '${item.tags}')">                
                <div class="flex-grow flex items-center justify-center mb-2 text-neutral-700 transition-colors duration-300 group-hover:text-brand-600 dark:text-neutral-300 dark:group-hover:text-blue-400">
                  <ss-icon icon="${item.slug}" thickness="${currentThickness}" class="w-12 h-12"></ss-icon>
                </div>
                
                <div class="w-full text-center">
                  <div class=" max-w-full">
                    <code class="block text-[12px] leading-tight text-neutral-400 bg-neutral-50 border border-neutral-100 rounded px-1.5 py-0.5 font-mono truncate transition-colors group-hover:text-brand-600 group-hover:bg-blue-50 group-hover:border-blue-100 dark:text-neutral-500 dark:bg-neutral-900 dark:border-neutral-700 dark:group-hover:text-blue-400 dark:group-hover:bg-blue-950 dark:group-hover:border-blue-900">
                      ${item.slug}
                    </code>
                  </div>
                </div>

              </div>
            `;
          },
          search: {
            enabled: true,
            selector: "#search-container",
            searchKey: "tags",
          },
          pagination: {
            enabled: true,
            selector: "#pagination-container",
            itemsPerPage: 480,
          },
        });

        const thicknessSlider = document.getElementById("thickness-slider");
        const thicknessValue = document.getElementById("thickness-value");

        thicknessSlider.addEventListener("input", (e) => {
          currentThickness = e.target.value;
          thicknessValue.textContent = currentThickness;

          // Update all currently visible icons
          const icons = document.querySelectorAll("#icons-container ss-icon");
          icons.forEach((icon) => {
            icon.setAttribute("thickness", currentThickness);
          });
        });
      });

      const targetDiv = document.getElementById("icons-container");
      const mainElement = document.querySelector("main");
      const config = { childList: true, subtree: true, characterData: true };
      
      // Notify parent iframe of height changes based on main element
      function notifyParentHeight() {
        if (window.parent !== window && mainElement) {
          // Use fixed height if set, otherwise use scrollHeight for natural content height
          const fixedHeight = mainElement.style.height;
          const height = fixedHeight ? parseInt(fixedHeight) : mainElement.scrollHeight;
          window.parent.postMessage({
            type: 'iframe-height',
            height: height
          }, '*');
        }
      }
      
      const callback = function (mutationsList, observer) {
        for (const mutation of mutationsList) {
          if (
            mutation.type === "childList" ||
            mutation.type === "characterData"
          ) {
            SWJ.refresh();
            // Notify parent after content changes with slight delay for render
            setTimeout(notifyParentHeight, 100);
          }
        }
      };
      const observer = new MutationObserver(callback);
      observer.observe(targetDiv, config);
      
      // Initial height notification after page loads
      window.addEventListener('load', () => setTimeout(notifyParentHeight, 500));

      // Listen for search input changes to update height
      const searchInput = document.getElementById('search-input');
      if (searchInput) {
        searchInput.addEventListener('input', () => {
          // Delay to allow content to re-render after filtering
          setTimeout(notifyParentHeight, 200);
        });
      }

      // Use ResizeObserver on main element for more reliable height tracking
      const resizeObserver = new ResizeObserver(() => {
        notifyParentHeight();
      });
      resizeObserver.observe(mainElement);

      function iconDetails(name, slug, tags) {
        let thickness = currentThickness;
        
        // Set main element height to 386px when modal opens
        mainElement.style.height = '386px';
        notifyParentHeight();
        
        SWM.createModal({
          title: `${name}`,
          content: `<div class="flex flex-col justify-center items-center lg:flex-row gap-4 w-full py-2">
            <div class="bg-neutral-50 border border-neutral-200 p-4 rounded-lg text-7xl aspect-square w-32 flex items-center justify-center dark:bg-neutral-800 dark:border-neutral-700 dark:text-neutral-100">
              <ss-icon icon="${slug}" thickness="${thickness}"></ss-icon>
            </div>
            <div class="flex flex-col gap-2 justify-between flex-grow lg:h-48">
              <div class="relative h-12">
                <pre class="bg-neutral-900 text-neutral-50 h-12 flex items-center p-3 rounded-r-lg rounded-l-md overflow-x-auto font-mono text-sm shadow-xl max-w-[calc(100vw-4rem)]"><code>&#x3C;ss-icon icon=&#x22;${slug}&#x22; thickness=&#x22;${thickness}&#x22;&#x3E;&#x3C;/ss-icon&#x3E;</code></pre>
                <textarea id="js-copy-code-${slug}" class="w-0 h-0" data-swj-id="js-copy-code-${slug}" data-swj-value><ss-icon icon="${slug}" thickness="${thickness}"></ss-icon></textarea>
                <button
                  type="button"
                  data-swj-copy="js-copy-code-${slug}"
                >Copy</button>
              </div>
              <div class="relative h-12">
                <pre class="bg-neutral-900 text-neutral-50 h-12 flex items-center p-3 rounded-r-lg rounded-l-md overflow-x-auto font-mono text-sm shadow-xl max-w-[calc(100vw-4rem)]"><code>&#x3C;i class=&#x22;ss ss-${slug}&#x22;&#x3E;&#x3C;/i&#x3E;</code></pre>
                <textarea id="css-copy-code-${slug}" class="w-0 h-0" data-swj-id="css-copy-code-${slug}" data-swj-value><i class="ss ss-${slug}"></i></textarea>
                <button
                  type="button"
                  data-swj-copy="css-copy-code-${slug}"
                >Copy</button>
              </div>
              <div class="text-sm text-neutral-400 mt-auto dark:text-neutral-500">tags: ${tags}</div>
            </div>
          </div>`,
          position: "top",
          zIndex: "50",
          bgOpacity: "1",
          bgColor: '#1B1B1F',
          onClose: () => {
            // Remove fixed height when modal closes
            mainElement.style.removeProperty('height');
            setTimeout(notifyParentHeight, 100);
          }
        });
        SWJ.refresh();
      }

      // Listen for modal close button clicks to restore height
      document.addEventListener('click', (e) => {
        if (e.target.closest('.swm-modal-close') || e.target.classList.contains('swm-modal-bg')) {
          mainElement.style.removeProperty('height');
          setTimeout(notifyParentHeight, 100);
        }
      });

      // Listen for theme changes from parent VitePress page
      window.addEventListener('message', (event) => {
        if (event.data && event.data.type === 'theme-change') {
          if (event.data.isDark) {
            document.documentElement.classList.add('dark')
          } else {
            document.documentElement.classList.remove('dark')
          }
        }
      })
    </script>
  </body>
</html>
